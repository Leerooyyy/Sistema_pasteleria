{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Productos disponibles Â· Dulzuras de Belgi's</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body {
      background: linear-gradient(to bottom right, #ffe4e1, #fffaf0);
      font-family: 'Poppins', system-ui, sans-serif;
    }
    nav { background-color: #ff00a6 !important; }
    .navbar-brand { color: white !important; font-weight: bold; }
    h1 { color: #a0522d; font-weight: 700; margin: 20px 0; }
    .table {
      background-color: white;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>

<nav class="navbar navbar-expand-lg mb-4">
  <div class="container">
    <a class="navbar-brand d-flex align-items-center" href="{% url 'inicio' %}">
      <img src="{% static 'ventas/img/logo_dulceria.png' %}"
           alt="Logo"
           class="me-2"
           style="height:32px;width:32px;border-radius:50%;object-fit:cover;">
      <span>Dulzuras de Belgi's</span>
    </a>

    <div class="ms-auto">
      <a href="{% url 'reporte_ventas' %}" class="btn btn-light btn-sm">Reportes</a>
      <a href="{% url 'inicio' %}" class="btn btn-outline-light btn-sm">Panel</a>
    </div>
  </div>
</nav>

<div class="container">
  <h1>Productos disponibles</h1>

  <table class="table table-striped table-bordered align-middle">
    <thead class="table-light">
      <tr>
        <th>Nombre</th>
        <th>CategorÃ­a</th>
        <th>Precio</th>
        <th>Stock</th>
        <th>Activo</th>
      </tr>
    </thead>
    <tbody>
      {% for p in productos %}
      <tr>
        <td>{{ p.nombre }}</td>
        <td>{{ p.categoria }}</td>
        <td>$ {{ p.precio_venta }}</td>

        {# ðŸ‘‡ IMPORTANTE: stock_actual te puede estar fallando si no existe en el modelo #}
        <td>
          {% if p.stock_actual is not None %}
            {{ p.stock_actual }}
          {% else %}
            {{ p.stock }}
          {% endif %}
        </td>

        <td>
          {% if p.activo %}
            <span class="badge bg-success">Activo</span>
          {% else %}
            <span class="badge bg-secondary">Inactivo</span>
          {% endif %}
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="5" class="text-center">No hay productos activos.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

</body>
</html>
